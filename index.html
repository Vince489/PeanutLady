<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boiled Peanut Orders</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            max-width: 600px;
        }
        h1, h2 {
            color: #333;
        }
        form {
            margin-bottom: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
        button {
            margin-top: 10px;
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #218838;
        }
        .delete-button {
            background-color: red;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            padding: 5px 10px;
        }
        .delete-button:hover {
            background-color: darkred;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            padding: 10px;
            border: 1px solid #ddd;
            margin-top: 5px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .flavor-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .flavor-entry select, .flavor-entry input {
            width: calc(50% - 10px);
            flex: 1;
            margin-right: 10px;
        }
        .flavor-entry button {
            flex-shrink: 0;
            margin-left: 10px;
        }
        .order-summary {
            margin-top: 20px;
        }
        .order-summary li {
            padding: 5px 0;
        }
        @media (max-width: 600px) {
            body {
                margin: 10px;
                max-width: 100%;
            }
            .flavor-entry select, .flavor-entry input {
                width: 100%;
                margin-right: 0;
                margin-top: 5px;
            }
            .flavor-entry button {
                margin-left: 0;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <h1>Boiled Peanut Orders</h1>
    <form id="order-form">
        <label for="customer-name">Customer Name:</label>
        <input type="text" id="customer-name" required>
        <div id="flavors">
            <div class="flavor-entry">
                <label for="flavor-0">Flavor:</label>
                <select id="flavor-0" class="flavor" required>
                    <option value="regular">Regular</option>
                    <option value="garlic">Garlic</option>
                    <option value="jalapeno">Jalapeno</option>
                    <option value="jalapenoGarlic">Jalapeno Garlic</option>
                    <option value="spicy">Spicy</option>
                    <option value="spicyGarlic">Spicy Garlic</option>
                    <option value="spicyJalapeno">Spicy Jalapeno</option>
                    <option value="spicyGarlicJalapeno">Spicy Garlic Jalapeno</option>
                </select>
                <label for="quantity-0">Quantity:</label>
                <input type="number" id="quantity-0" class="quantity" min="1" required>
                <button type="button" class="delete-button" onclick="removeFlavor(this)">Remove</button>
            </div>
        </div>
        <button type="button" onclick="addFlavor()">Add Another Flavor</button>
        <button type="submit">Submit Order</button>
    </form>
    <h2>Order List</h2>
    <ul id="order-list"></ul>
    <h2>Order Summary</h2>
    <ul id="order-summary" class="order-summary"></ul>
    <script>
        const flavorPrice = 5;
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let flavorIndex = 1;
        let editIndex = -1;
        document.getElementById('order-form').addEventListener('submit', addOrder);
        function addFlavor() {
            const flavorsDiv = document.getElementById('flavors');
            const newFlavorDiv = document.createElement('div');
            newFlavorDiv.classList.add('flavor-entry');
            newFlavorDiv.innerHTML = `
                <label for="flavor-${flavorIndex}">Flavor:</label>
                <select id="flavor-${flavorIndex}" class="flavor" required>
                    <option value="regular">Regular</option>
                    <option value="garlic">Garlic</option>
                    <option value="jalapeno">Jalapeno</option>
                    <option value="jalapenoGarlic">Jalapeno Garlic</option>
                    <option value="spicy">Spicy</option>
                    <option value="spicyGarlic">Spicy Garlic</option>
                    <option value="spicyJalapeno">Spicy Jalapeno</option>
                    <option value="spicyGarlicJalapeno">Spicy Garlic Jalapeno</option>
                </select>
                <label for="quantity-${flavorIndex}">Quantity:</label>
                <input type="number" id="quantity-${flavorIndex}" class="quantity" min="1" required>
                <button type="button" class="delete-button" onclick="removeFlavor(this)">Remove</button>
            `;
            flavorsDiv.appendChild(newFlavorDiv);
            flavorIndex++;
        }
        function removeFlavor(button) {
            button.parentElement.remove();
        }
        function addOrder(event) {
            event.preventDefault();
            const customerName = document.getElementById('customer-name').value;
            const flavorEntries = document.querySelectorAll('.flavor-entry');
            let order = {
                customerName,
                flavors: [],
                timestamp: new Date().toLocaleString(),
                total: 0
            };
            flavorEntries.forEach(entry => {
                const flavor = entry.querySelector('.flavor').value;
                const quantity = parseInt(entry.querySelector('.quantity').value);
                order.flavors.push({ flavor, quantity });
                order.total += quantity * flavorPrice;
            });
            if (editIndex === -1) {
                orders.push(order);
            } else {
                orders[editIndex] = order;
                editIndex = -1;
            }
            localStorage.setItem('orders', JSON.stringify(orders));
            displayOrders();
            displaySummary();
            document.getElementById('order-form').reset();
            document.getElementById('flavors').innerHTML = `
                <div class="flavor-entry">
                    <label for="flavor-0">Flavor:</label>
                    <select id="flavor-0" class="flavor" required>
                        <option value="regular">Regular</option>
                        <option value="garlic">Garlic</option>
                        <option value="jalapeno">Jalapeno</option>
                        <option value="jalapenoGarlic">Jalapeno Garlic</option>
                        <option value="spicy">Spicy</option>
                        <option value="spicyGarlic">Spicy Garlic</option>
                        <option value="spicyJalapeno">Spicy Jalapeno</option>
                        <option value="spicyGarlicJalapeno">Spicy Garlic Jalapeno</option>
                    </select>
                    <label for="quantity-0">Quantity:</label>
                    <input type="number" id="quantity-0" class="quantity" min="1" required>
                    <button type="button" class="delete-button" onclick="removeFlavor(this)">Remove</button>
                </div>
            `;
            flavorIndex = 1;
        }
        function displayOrders() {
            const orderList = document.getElementById('order-list');
            orderList.innerHTML = '';
            orders.forEach((order, index) => {
                const li = document.createElement('li');
                li.innerHTML = `<div><strong>${order.customerName}</strong><br>`;
                order.flavors.forEach(flavor => {
                    li.innerHTML += `${flavor.quantity} ${flavor.flavor} peanuts<br>`;
                });
                li.innerHTML += `Total: $${order.total}<br>Timestamp: ${order.timestamp}</div>
                                 <div><button onclick="editOrder(${index})">Edit</button> 
                                 <button class="delete-button" onclick="deleteOrder(${index})">Delete</button></div>`;
                orderList.appendChild(li);
            });
        }
        function deleteOrder(index) {
            orders.splice(index, 1);
            localStorage.setItem('orders', JSON.stringify(orders));
            displayOrders();
            displaySummary();
        }
        function editOrder(index) {
            const order = orders[index];
            document.getElementById('customer-name').value = order.customerName;
            const flavorsDiv = document.getElementById('flavors');
            flavorsDiv.innerHTML = '';
            order.flavors.forEach((flavor, i) => {
                const newFlavorDiv = document.createElement('div');
                newFlavorDiv.classList.add('flavor-entry');
                newFlavorDiv.innerHTML = `
                    <label for="flavor-${i}">Flavor:</label>
                    <select id="flavor-${i}" class="flavor" required>
                        <option value="regular" ${flavor.flavor === 'regular' ? 'selected' : ''}>Regular</option>
                        <option value="garlic" ${flavor.flavor === 'garlic' ? 'selected' : ''}>Garlic</option>
                        <option value="jalapeno" ${flavor.flavor === 'jalapeno' ? 'selected' : ''}>Jalapeno</option>
                        <option value="jalapenoGarlic" ${flavor.flavor === 'jalapenoGarlic' ? 'selected' : ''}>Jalapeno Garlic</option>
                        <option value="spicy" ${flavor.flavor === 'spicy' ? 'selected' : ''}>Spicy</option>
                        <option value="spicyGarlic" ${flavor.flavor === 'spicyGarlic' ? 'selected' : ''}>Spicy Garlic</option>
                        <option value="spicyJalapeno" ${flavor.flavor === 'spicyJalapeno' ? 'selected' : ''}>Spicy Jalapeno</option>
                        <option value="spicyGarlicJalapeno" ${flavor.flavor === 'spicyGarlicJalapeno' ? 'selected' : ''}>Spicy Garlic Jalapeno</option>
                    </select>
                    <label for="quantity-${i}">Quantity:</label>
                    <input type="number" id="quantity-${i}" class="quantity" min="1" value="${flavor.quantity}" required>
                    <button type="button" class="delete-button" onclick="removeFlavor(this)">Remove</button>
                `;
                flavorsDiv.appendChild(newFlavorDiv);
            });
            flavorIndex = order.flavors.length;
            editIndex = index;
            document.querySelector('button[type="submit"]').textContent = 'Update Order';
        }
        function displaySummary() {
            const orderSummary = document.getElementById('order-summary');
            orderSummary.innerHTML = '';
            let summary = {};
            let total = 0;
            orders.forEach(order => {
                order.flavors.forEach(flavor => {
                    if (!summary[flavor.flavor]) {
                        summary[flavor.flavor] = 0;
                    }
                    summary[flavor.flavor] += flavor.quantity;
                    total += flavor.quantity * flavorPrice;
                });
            });
            for (const [flavor, quantity] of Object.entries(summary)) {
                const li = document.createElement('li');
                li.textContent = `${quantity} ${flavor} peanuts`;
                orderSummary.appendChild(li);
            }
            const totalLi = document.createElement('li');
            totalLi.textContent = `Total: $${total}`;
            orderSummary.appendChild(totalLi);
        }
        displayOrders();
        displaySummary();
    </script>
</body>
</html>